# BananaWRT Configuration
# This file contains centralized configuration values for all BananaWRT scripts
#
# Override these values by setting environment variables before running scripts
# Example: BANANAWRT_REPO="user/repo" ./script.sh
#

# GitHub Repository
BANANAWRT_REPO="${BANANAWRT_REPO:-SuperKali/BananaWRT}"
GITHUB_API_URL="${GITHUB_API_URL:-https://api.github.com/repos}"
GITHUB_RELEASES_URL="${GITHUB_RELEASES_URL:-https://github.com/${BANANAWRT_REPO}/releases}"

# Custom Package Repository
CUSTOM_REPO_URL="${CUSTOM_REPO_URL:-https://repo.superkali.me}"
CUSTOM_PACKAGES_FEED="${CUSTOM_PACKAGES_FEED:-https://github.com/SuperKali/openwrt-packages}"

# Target Device Configuration
TARGET_VENDOR="${TARGET_VENDOR:-bananapi}"
TARGET_DEVICE="${TARGET_DEVICE:-bpi-r3-mini}"
TARGET_SUBTARGET="${TARGET_SUBTARGET:-mediatek-filogic}"

# eMMC Partition Configuration
PARTITION_BOOT0="${PARTITION_BOOT0:-/dev/mmcblk0boot0}"
PARTITION_BL31="${PARTITION_BL31:-/dev/mmcblk0p3}"
PARTITION_INITRAMFS="${PARTITION_INITRAMFS:-/dev/mmcblk0p4}"
PARTITION_SYSUPGRADE="${PARTITION_SYSUPGRADE:-/dev/mmcblk0p0}"

# File paths
FIRMWARE_TMP_DIR="${FIRMWARE_TMP_DIR:-/tmp}"
RELEASE_INFO_FILE="${RELEASE_INFO_FILE:-/etc/bananawrt_release}"
OPENWRT_RELEASE_FILE="${OPENWRT_RELEASE_FILE:-/etc/openwrt_release}"

# Release types
RELEASE_TYPES="stable nightly"

# Default release type
DEFAULT_RELEASE_TYPE="${DEFAULT_RELEASE_TYPE:-stable}"

# Firmware file naming pattern
# Usage: eval "echo \"$FIRMWARE_FILE_PATTERN\"" with FIRMWARE_VERSION and TARGET_* set
FIRMWARE_FILE_PATTERN="${FIRMWARE_FILE_PATTERN:-immortalwrt-\${FIRMWARE_VERSION}-\${TARGET_SUBTARGET}-\${TARGET_VENDOR}_\${TARGET_DEVICE}}"

# Firmware asset suffixes
ASSET_PRELOADER_SUFFIX="${ASSET_PRELOADER_SUFFIX:-emmc-preloader.bin}"
ASSET_BL31_UBOOT_SUFFIX="${ASSET_BL31_UBOOT_SUFFIX:-emmc-bl31-uboot.fip}"
ASSET_INITRAMFS_SUFFIX="${ASSET_INITRAMFS_SUFFIX:-initramfs-recovery.itb}"
ASSET_SYSUPGRADE_SUFFIX="${ASSET_SYSUPGRADE_SUFFIX:-squashfs-sysupgrade.itb}"

# Network settings
CURL_TIMEOUT="${CURL_TIMEOUT:-30}"
CURL_RETRY_COUNT="${CURL_RETRY_COUNT:-3}"
CURL_RETRY_DELAY="${CURL_RETRY_DELAY:-5}"

# Package management
OPKG_CUSTOM_FEEDS_FILE="${OPKG_CUSTOM_FEEDS_FILE:-/etc/opkg/customfeeds.conf}"
EXCLUDED_PACKAGE_PREFIXES="${EXCLUDED_PACKAGE_PREFIXES:-luci-i18n-}"

# Logging
# Set to 0 for all messages, 1 for INFO and above, etc.
BANANAWRT_LOG_LEVEL="${BANANAWRT_LOG_LEVEL:-0}"

# Packages to remove from upstream (space-separated)
STOCK_PACKAGES_TO_REMOVE="${STOCK_PACKAGES_TO_REMOVE:-lpac luci-app-modemband modemband luci-app-3ginfo-lite luci-proto-quectel quectel-cm}"

# Stock packages with glob patterns (space-separated)
STOCK_PACKAGES_GLOBS="${STOCK_PACKAGES_GLOBS:-package/feeds/luci/luci-i18n-modemband-* package/feeds/luci/luci-app-sms-tool-js*}"
